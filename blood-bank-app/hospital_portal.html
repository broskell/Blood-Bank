<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Hospital Blood Panel</title>

    <!-- Your main CSS -->
    <link rel="stylesheet" href="css/styles.css" />

    <!-- Firebase SDKs (compat) -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  </head>
  <body>
    <!-- HOSPITAL LOGIN -->
    <div class="box" id="loginDiv">
      <h2>Hospital Login</h2>
      <input type="email" id="loginEmail" placeholder="Email" />
      <input type="password" id="loginPassword" placeholder="Password" />
      <button onclick="login()">Login</button>
      <p onclick="showRegister()">Create new hospital account</p>
    </div>

    <!-- HOSPITAL REGISTER -->
    <div class="box" id="registerDiv" style="display: none">
      <h2>Register Hospital</h2>
      <input type="email" id="regEmail" placeholder="Email" />
      <input type="password" id="regPassword" placeholder="Password" />
      <button onclick="register()">Register</button>
      <p onclick="showLogin()">Already have an account</p>
    </div>

    <!-- HOSPITAL DASHBOARD -->
    <div class="dashboard" id="dashboardDiv" style="display: none">
      <div class="top">
        <h1>Hospital Blood Panel</h1>
        <button class="top-logout" onclick="logout()">Logout</button>
      </div>

      <!-- MAIN CARDS -->
      <div class="cards">
        <div class="card" id="requestCard">Request Blood Units</div>
        <div class="card" id="statusCard">Track Request Status</div>
        <div class="card" id="availabilityCard">View Availability</div>
      </div>

      <!-- REQUEST BLOOD UNITS -->
      <div class="section" id="requestSection" style="display: none">
        <h3>Request Blood Units</h3>
        <input id="reqBloodGroup" placeholder="Blood Group (e.g. A+)" />
        <input id="reqUnits" type="number" placeholder="Units needed" />
        <input id="reqReason" placeholder="Reason / Patient info" />
        <button onclick="submitRequest()">Submit Request</button>
      </div>

      <!-- TRACK REQUEST STATUS -->
      <div class="section" id="statusSection" style="display: none">
        <h3>Request Status</h3>
        <div id="requestList"></div>
      </div>

      <!-- VIEW AVAILABILITY -->
      <div class="section" id="availabilitySection" style="display: none">
        <h3>Current Blood Availability</h3>
        <div id="availabilityList"></div>
      </div>
    </div>

    <!-- Firebase config + initialization -->
    <script>
      // IMPORTANT: use the SAME config as in admin_panel.html
      const firebaseConfig = {
        apiKey: "AIzaSyC5SUAwMlWuXoWTChmh-LN76LxE56B0cLU",
        authDomain: "blood-bank-17.firebaseapp.com",
        projectId: "blood-bank-17",
        storageBucket: "blood-bank-17.firebasestorage.app",
        messagingSenderId: "1057545309574",
        appId: "1:1057545309574:web:02fd3d4bf7caf17ee77007",
        measurementId: "G-JF4TYRRR69"
      };

      if (!firebase.apps.length) {
        console.log("Initializing Firebase (hospital_portal.html) with config:", firebaseConfig);
        firebase.initializeApp(firebaseConfig);
      } else {
        console.log("Firebase already initialized");
      }
    </script>

    <!-- Hospital portal logic -->
    <script src="js/hospital.js"></script>
  </body>
</html>